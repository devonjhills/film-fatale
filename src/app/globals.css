@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Film Noir - Clean High Contrast Light Mode (mostly for accessibility preference) */
    --background: 0 0% 98%;
    --foreground: 0 0% 4%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 4%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 4%;
    --primary: 0 72% 45%; /* Deep Cinematic Red */
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 94%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 94%;
    --muted-foreground: 0 0% 40%;
    --accent: 0 0% 94%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 0 72% 45%;
    --radius: 0.5rem;
  }

  .dark {
    /* Film Noir - True Sleek OLED Dark Mode */
    --background: 240 5% 3%; /* Deep incredibly dark slate/almost black */
    --foreground: 40 10% 96%; /* Crisp, slightly warm bone white */
    --card: 240 5% 5%; /* Subtle step up from black */
    --card-foreground: 40 10% 96%;
    --popover: 240 5% 5%;
    --popover-foreground: 40 10% 96%;
    --primary: 0 75% 50%; /* Vibrant Cinematic Red */
    --primary-foreground: 0 0% 100%;
    --secondary: 240 5% 10%;
    --secondary-foreground: 40 10% 96%;
    --muted: 240 5% 10%;
    --muted-foreground: 240 5% 65%;
    --accent: 240 5% 12%;
    --accent-foreground: 40 10% 96%;
    --destructive: 0 80% 55%;
    --destructive-foreground: 0 0% 100%;
    --border: 240 5% 12%;
    --input: 240 5% 12%;
    --ring: 0 75% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
    /* Prevent layout shift from scrollbar appearing/disappearing */
    overflow-y: scroll;
  }

  /* Custom Scrollbar - Noir Theme */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-track {
    background: hsl(var(--background));
  }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--primary) / 0.6);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold tracking-tight;
  }
}

@layer utilities {
  /* =========================================================
     GLASSMORPHISM - Core utility used throughout the site
     ========================================================= */
  .glass {
    background: hsl(var(--card) / 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid hsl(var(--border) / 0.4);
  }

  .glass-strong {
    background: hsl(var(--card) / 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid hsl(var(--border) / 0.5);
  }

  .glass-subtle {
    background: hsl(var(--background) / 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid hsl(var(--border) / 0.2);
  }

  /* =========================================================
     ELEVATION / SHADOW SYSTEM
     ========================================================= */
  .elevation-1 {
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.12),
      0 1px 2px rgba(0, 0, 0, 0.24);
  }

  .elevation-2 {
    box-shadow:
      0 3px 6px rgba(0, 0, 0, 0.16),
      0 3px 6px rgba(0, 0, 0, 0.23);
  }

  .elevation-3 {
    box-shadow:
      0 10px 20px rgba(0, 0, 0, 0.19),
      0 6px 6px rgba(0, 0, 0, 0.23);
  }

  /* Dark mode elevation — deeper, cinematic shadows */
  .dark .elevation-1 {
    box-shadow:
      0 1px 4px rgba(0, 0, 0, 0.5),
      0 1px 2px rgba(0, 0, 0, 0.4);
  }

  .dark .elevation-2 {
    box-shadow:
      0 3px 10px rgba(0, 0, 0, 0.6),
      0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .dark .elevation-3 {
    box-shadow:
      0 8px 30px rgba(0, 0, 0, 0.7),
      0 4px 10px rgba(0, 0, 0, 0.5);
  }

  /* Primary glow — cinematic red accent */
  .glow-primary {
    box-shadow: 0 0 20px hsl(var(--primary) / 0.35);
  }

  .glow-primary-sm {
    box-shadow: 0 0 10px hsl(var(--primary) / 0.25);
  }

  /* =========================================================
     TEXT SHADOW UTILITIES
     ========================================================= */
  .text-shadow-sm {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  }

  .text-shadow {
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.7);
  }

  .text-shadow-strong {
    text-shadow:
      0 2px 12px rgba(0, 0, 0, 0.9),
      0 1px 3px rgba(0, 0, 0, 0.6);
  }

  /* =========================================================
     DIVIDER
     ========================================================= */
  .divider {
    @apply h-px bg-border w-full;
  }

  /* =========================================================
     BACKDROP / DETAIL PAGE SYSTEM
     ========================================================= */
  .backdrop-container {
    @apply fixed inset-0 -z-10 bg-cover bg-center bg-no-repeat;
  }

  .backdrop-overlay {
    @apply fixed inset-0 -z-[9] pointer-events-none;
    background: linear-gradient(
      to bottom,
      hsl(var(--background) / 0.2) 0%,
      hsl(var(--background) / 0.8) 60%,
      hsl(var(--background)) 100%
    );
  }

  .detail-page {
    @apply relative z-10 min-h-screen;
  }

  /* =========================================================
     LAYOUT STABILITY
     ========================================================= */
  .layout-stable {
    contain: layout style;
  }

  /* =========================================================
     SPACING SCALE (8px grid)
     ========================================================= */
  .spacing-xs { margin: 0.5rem; }
  .spacing-sm { margin: 1rem; }
  .spacing-md { margin: 1.5rem; }
  .spacing-lg { margin: 2rem; }
  .spacing-xl { margin: 2.5rem; }
  .spacing-2xl { margin: 3rem; }

  /* =========================================================
     KEYFRAME ANIMATIONS
     ========================================================= */
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 8px hsl(var(--primary) / 0.3); }
    50% { box-shadow: 0 0 24px hsl(var(--primary) / 0.6); }
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-in-left {
    from {
      opacity: 0;
      transform: translateX(-16px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.5s ease-out both;
  }

  .animate-fade-in {
    animation: fade-in 0.4s ease-out both;
  }

  .animate-slide-in-left {
    animation: slide-in-left 0.4s ease-out both;
  }

  .animate-scale-in {
    animation: scale-in 0.3s ease-out both;
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* Shimmer skeleton loading */
  .shimmer {
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 25%,
      hsl(var(--muted-foreground) / 0.1) 50%,
      hsl(var(--muted)) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  /* =========================================================
     CARD HOVER ENHANCEMENT
     ========================================================= */
  .card-hover {
    @apply transition-all duration-300;
  }

  .card-hover:hover {
    @apply -translate-y-1;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
  }

  /* =========================================================
     GRADIENT UTILITIES
     ========================================================= */
  .gradient-noir {
    background: linear-gradient(
      135deg,
      hsl(var(--background)) 0%,
      hsl(var(--card)) 100%
    );
  }

  .gradient-red-accent {
    background: linear-gradient(
      135deg,
      hsl(var(--primary)) 0%,
      hsl(0 60% 35%) 100%
    );
  }

  /* =========================================================
     SELECTION COLOR
     ========================================================= */
  ::selection {
    background: hsl(var(--primary) / 0.25);
    color: hsl(var(--foreground));
  }
}
